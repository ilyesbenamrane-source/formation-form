<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ‘¨â€ğŸ“ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù â€“ GitHub Version</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; font-family: "Tajawal", sans-serif; }
    .card { border-radius: 20px; border: none; }
  </style>
</head>
<body class="text-center">

  <div class="container py-5">
    <h2 class="text-primary mb-3">ğŸ“ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù â€“ Ù…Ù† GitHub Pages</h2>
    <p class="text-muted">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø«Ù… Ø£Ø¶Ù Ø·Ø§Ù„Ø¨Ù‹Ø§ Ø¬Ø¯ÙŠØ¯Ù‹Ø§</p>

    <div class="card shadow p-4 mt-4">
      <div class="mb-3">
        <label class="form-label">Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø´Ø±Ù (Ù„Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„ØªØ­Ù‚Ù‚)</label>
        <input type="email" id="adminEmail" class="form-control text-center" placeholder="example@gmail.com">
      </div>
      <hr>
      <div class="mb-3">
        <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label>
        <input type="text" id="name" class="form-control text-center">
      </div>
      <div class="mb-3">
        <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="text" id="phone" class="form-control text-center">
      </div>
      <div class="mb-3">
        <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø·Ø§Ù„Ø¨</label>
        <input type="email" id="studentEmail" class="form-control text-center">
      </div>
      <div class="mb-3">
        <label class="form-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</label>
        <select id="level" class="form-select text-center">
          <option>Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
          <option>Ù…ØªÙˆØ³Ø·</option>
          <option>Ø«Ø§Ù†ÙˆÙŠ</option>
          <option>Ø¬Ø§Ù…Ø¹ÙŠ</option>
        </select>
      </div>
      <button class="btn btn-primary w-100" onclick="submitStudent()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âœ…</button>
      <p id="result" class="fw-bold mt-3"></p>
    </div>
  </div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz-XwHM_QupSRz0rh27uQcD8IIjmsAjRxm5mzeMmYu1/dev";

    async function submitStudent() {
      const adminEmail = document.getElementById("adminEmail").value.trim();
      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const studentEmail = document.getElementById("studentEmail").value.trim();
      const level = document.getElementById("level").value;

      if (!adminEmail || !name || !phone || !studentEmail) {
        document.getElementById("result").innerText = "âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.";
        return;
      }

      document.getElementById("result").innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...";

      const payload = {
        email: adminEmail,
        name: name,
        phone: phone,
        studentEmail: studentEmail,
        level: level
      };

      try {
        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          mode: "no-cors", // Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ cors Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        // Ù„Ù„Ø£Ø³Ù Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø±Ø¯ ÙÙŠ no-corsØŒ Ù„Ø°Ù„Ùƒ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… redirect HTML ÙÙŠ Apps Script Ø¨Ø¯Ù„ JSON
        document.getElementById("result").innerText = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ (ØªØ­Ù‚Ù‚ ÙÙŠ Google Sheet)";

      } catch (err) {
        document.getElementById("result").innerText = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: " + err.message;
      }
    }
  </script>
</body>
</html>

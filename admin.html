<!-- admin.html -->
<!doctype html>
<html lang="ar" dir="rtl">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="text-center mb-4 text-primary">ğŸ‘¨â€ğŸ“ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù â€“ Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
    <div id="userEmail" class="text-center text-muted mb-3">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚...</div>

    <div class="card shadow p-4">
      <!-- form -->
      <div class="mb-3">
        <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <input type="text" id="name" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="text" id="phone" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
        <input type="email" id="email" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</label>
        <select id="level" class="form-select">
          <option>Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</option>
          <option>Ù…ØªÙˆØ³Ø·</option>
          <option>Ø«Ø§Ù†ÙˆÙŠ</option>
          <option>Ø¬Ø§Ù…Ø¹ÙŠ</option>
        </select>
      </div>
      <div class="text-center">
        <button class="btn btn-primary px-5" onclick="submitStudent()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ âœ…</button>
      </div>
    </div>
    <p id="result" class="mt-4 text-center fw-bold"></p>
  </div>

<script>
  // Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… (Session) ÙˆØ£Ø¹Ø±Ø¶Ù‡
  function showEmail() {
    google.script.run.withSuccessHandler(function(email){
      document.getElementById('userEmail').innerText = "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + (email || "(ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ)");
    }).getSessionEmail(); // Ø³Ù†Ø¶ÙŠÙ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ÙÙŠ Code.gs Ù„Ùˆ Ø§Ø­ØªØ¬Ù†Ø§
  }
  // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨
  function submitStudent(){
    const student = {
      name: document.getElementById("name").value,
      phone: document.getElementById("phone").value,
      email: document.getElementById("email").value,
      level: document.getElementById("level").value
    };
    google.script.run.withSuccessHandler(function(msg){
      document.getElementById("result").innerText = msg;
      document.getElementById("name").value = "";
      document.getElementById("phone").value = "";
      document.getElementById("email").value = "";
    }).addStudent(student);
  }
  // Ù†ÙÙ‘Ø° Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  window.onload = function(){ showEmail(); };
</script>
</body>
</html>
